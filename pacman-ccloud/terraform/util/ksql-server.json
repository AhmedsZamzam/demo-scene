[
  {
    "image": "${ksql_server_image}",
    "essential": true,
    "name": "ksql_server",
    "cpu": 2048,
    "memory": 8192,
    "portMappings": [
      {
        "hostPort": 8088,
        "protocol": "tcp",
        "containerPort": 8088
      }
    ],
    "environment": [
      {
        "name": "KSQL_KSQL_SERVICE_ID",
        "value": "ksql_server_custom"
      },
      {
        "name": "KSQL_BOOTSTRAP_SERVERS",
        "value": "${bootstrap_server}"
      },
      {
        "name": "KSQL_LISTENERS",
        "value": "http://0.0.0.0:8088"
      },
      {
        "name": "KSQL_KSQL_INTERNAL_TOPIC_REPLICAS",
        "value": "3"
      },
      {
        "name": "KSQL_KSQL_STREAMS_REPLICATION_FACTOR",
        "value": "3"
      },
      {
        "name": "KSQL_KSQL_SINK_REPLICAS",
        "value": "3"
      },
      {
        "name": "KSQL_SASL_MECHANISM",
        "value": "PLAIN"
      },
      {
        "name": "KSQL_SECURITY_PROTOCOL",
        "value": "SASL_SSL"
      },
      {
        "name": "KSQL_SASL_JAAS_CONFIG",
        "value": "org.apache.kafka.common.security.plain.PlainLoginModule required username=\"${cluster_api_key}\" password=\"${cluster_api_secret}\";"
      }
    ],
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-create-group": "true",
        "awslogs-group": "/ecs/ksql_server",
        "awslogs-region": "${logs_region}",
        "awslogs-stream-prefix": "ecs"
      }
    }
  }
]